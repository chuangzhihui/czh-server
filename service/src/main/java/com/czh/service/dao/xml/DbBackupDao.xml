<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.czh.service.dao.DbBackupDao">

    <resultMap type="com.czh.service.entity.DbBackup" id="DbBackupMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="fileName" column="fileName" jdbcType="VARCHAR"/>
        <result property="adminId" column="adminId" jdbcType="INTEGER"/>
        <result property="filePath" column="filePath" jdbcType="VARCHAR"/>
        <result property="fileSize" column="fileSize" jdbcType="INTEGER"/>
        <result property="atime" column="atime" jdbcType="TIMESTAMP"/>
    </resultMap>
    <select id="getList" resultType="com.czh.service.vo.admin.DbBackupVo"
            parameterType="com.czh.service.dto.admin.DbBackUpListDto">
        select a.*,ifnull(b.userName,"-") as adminName from czh_db_backup as a
        left join czh_admin as b on a.adminId=b.adminId
        <where>
            <if test="stime!=null and stime!=''">
                and a.atime between #{stime} and #{etime}
            </if>
            <if test="adminId!=null and adminId>0">
                and a.adminId=#{adminId}
            </if>
        </where>
    </select>


</mapper>

